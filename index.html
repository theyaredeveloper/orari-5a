<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Orario 5A</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f4f8;
      margin: 0;
      padding: 50px 20px;
      text-align: center;
      color: #333;
    }

    h1 {
      color: #1d3557;
      margin-bottom: 30px;
    }

    .popup {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    .popup-content {
      background: white;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 0 20px rgba(0,0,0,0.2);
      max-width: 400px;
    }

    .popup-content h2 {
      margin-top: 0;
    }

    button {
      background-color: #1d3557;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 10px;
      cursor: pointer;
      margin-top: 10px;
    }

    .screen {
      display: none;
    }

    .visible {
      display: block;
    }

    input, select {
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      width: 250px;
      margin: 10px auto;
      display: block;
      font-size: 16px;
    }

    .suggestion {
      margin-top: 20px;
      color: #e63946;
    }

    .suggestion span {
      display: inline-block;
      background: #fff;
      border: 1px solid #ccc;
      padding: 5px 10px;
      margin: 5px;
      border-radius: 10px;
      cursor: pointer;
    }

    .result {
      font-size: 18px;
      margin-top: 20px;
      color: #1d3557;
    }
  </style>
</head>
<body>

  <div class="popup" id="popup">
    <div class="popup-content">
      <h2>Benvenuti!</h2>
      <p>Inserisci il giorno e l'ora che vuoi sapere, e vedrai la materia in quell'ora.</p>
      <button onclick="closePopup()">Grazie!</button>
    </div>
  </div>

  <h1>Sito creato per gli orari della 5A</h1>

  <!-- Scelta giorno -->
  <div class="screen visible" id="dayScreen">
    <input type="text" id="dayInput" placeholder="Scrivi il giorno es. lunedì">
    <button onclick="nextToHour()">Avanti</button>
    <div class="suggestion" id="daySuggestion" style="display:none;">
      Stavi cercando...<br>
      <span onclick="selectDay('lunedì')">Lunedì</span>
      <span onclick="selectDay('martedì')">Martedì</span>
      <span onclick="selectDay('mercoledì')">Mercoledì</span>
      <span onclick="selectDay('giovedì')">Giovedì</span>
      <span onclick="selectDay('venerdì')">Venerdì</span>
    </div>
  </div>

  <!-- Scelta ora -->
  <div class="screen" id="hourScreen">
    <p>Scrivi l'ora scolastica (es. "prima", "1", "seconda") <b>oppure</b> un orario reale (es. "08:05")</p>
    <input type="text" id="hourInput" placeholder="Esempio: 08:00 o 2">
    <button onclick="showResult()">Scopri materia</button>
    <div class="suggestion" id="hourSuggestion" style="display:none;">
      Inserisci orari validi tra le 08:00 e le 14:00 (Venerdì fino alle 13:00)
    </div>
    <div class="result" id="result"></div>
  </div>

  <script>
    const schedule = {
      "lunedì": ["Matematica", "Matematica", "Italiano", "Italiano", "Educazione fisica", "Musica"],
      "martedì": ["Italiano", "Italiano", "Inglese", "Potenziamento", "Arte", "Scienze"],
      "mercoledì": ["Storia", "Storia", "Matematica", "Matematica", "Arte", "Scienze"],
      "giovedì": ["Religione", "Geografia", "Italiano", "Geografia", "Inglese", "Inglese"],
      "venerdì": ["Religione", "Matematica", "Italiano", "Tecnologia", "Educazione fisica"]
    };

    let selectedDay = "";
    let errorCount = 0;

    function closePopup() {
      document.getElementById('popup').style.display = 'none';
    }

    function normalize(text) {
      return text.trim().toLowerCase();
    }

    function nextToHour() {
      const input = normalize(document.getElementById("dayInput").value);
      if (schedule[input]) {
        selectedDay = input;
        document.getElementById("dayScreen").classList.remove("visible");
        document.getElementById("hourScreen").classList.add("visible");
        document.getElementById("daySuggestion").style.display = "none";
        errorCount = 0;
      } else {
        errorCount++;
        if (errorCount >= 2) {
          document.getElementById("daySuggestion").style.display = "block";
        }
      }
    }

    function selectDay(day) {
      selectedDay = day;
      document.getElementById("dayScreen").classList.remove("visible");
      document.getElementById("hourScreen").classList.add("visible");
      document.getElementById("daySuggestion").style.display = "none";
    }

    function showResult() {
      const input = normalize(document.getElementById("hourInput").value);
      const mapping = {
        "prima": 0, "seconda": 1, "terza": 2,
        "quarta": 3, "quinta": 4, "sesta": 5,
        "1": 0, "2": 1, "3": 2, "4": 3, "5": 4, "6": 5
      };

      let oraIndex = null;

      if (mapping.hasOwnProperty(input)) {
        oraIndex = mapping[input];
      } else if (/^\d{2}:\d{2}$/.test(input)) {
        const [h, m] = input.split(":").map(Number);
        const totalMinutes = h * 60 + m;
        const start = 8 * 60; // 08:00
        if (totalMinutes >= start && totalMinutes < start + 60 * 6) {
          oraIndex = Math.floor((totalMinutes - start) / 60);
        }
      }

      const maxOre = selectedDay === "venerdì" ? 5 : 6;

      if (oraIndex !== null && oraIndex < maxOre) {
        const materia = schedule[selectedDay][oraIndex];
        document.getElementById("result").textContent = `Materia: ${materia}`;
        document.getElementById("hourSuggestion").style.display = "none";
      } else {
        document.getElementById("result").textContent = "";
        document.getElementById("hourSuggestion").style.display = "block";
      }
    }
  </script>
</body>
</html>
